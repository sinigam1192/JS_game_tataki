<!DOCTYPE html>
<html>
    <head>
        <mata charset = "utf-8" />
        <title>Project TATAKI</title>

<style>
* {
    padding: 0;
    margin: 0;
}
canvas{
    background: #eee;
    display: block;
    margin: 0 auto;
}
.change {
  cursor: url(../image/tataki.png), auto;
}
</style>
    </head>
    <body>
      <img src = "http://drive.google.com/uc?export=view&id=1jyuD7K3DpMQ9pmkLyrgY3lr-CGQmCRRj">
        <div id = "js-target"><canvas id = "myCanvas" width ="480" height ="320"></canvas></div>
<script>
  //------------------------------------<基本の定義>------------------------------------
  //canvasタグの情報を取得する
  var canvas =document.getElementById("myCanvas");
  //2D描画コンテキスト
  //canvasタグに2d描画ができるようにする：引数は2d
  var ctx = canvas.getContext("2d");
//-------------------------------------<変数の定義>-------------------------------------
var eventStatus = 0;//0がスタート画面 1がゲーム画面 2がリザルト画面

let target = document.getElementById("js-target");


var ememy_max = 20;
var enemy = [20][9];

//敵の情報  [enemy_x, enemy_y, enemy_type, muki, pattarn, hp, flag, point, hit]
var kobae_info = [0, 0, 1, 0, 0, 1, 1, 10, 0];//コバエ情報
var mid_info = [0, 0, 1, 0, 0, 10, 1, 50, 0];//オオバエ情報
var boss_info = [0, 0, 1, 0, 0, 50, 1, 500, 0];//ボス情報
var red_info = [0, 0, 1, 0, 0, 999, 1, 0, 0];//アカバエ情報
//敵の変数
var enemy_kobae = new Image();
var enemy_mid = new Image();
var enemy_boss = new Image();
var enemy_red = new Image();
var enemy_cnt = 0;//敵の登録回数
enemy_kobae.src = "image/コバエ.jpg";//敵フラグナンバー１
enemy_mid.src = "image/オオバエ.jpg";//敵フラグナンバー２
enemy_boss.src = "image/boss.jpg";//敵フラグナンバー３
enemy_red.src = "image/アカバエ.jpg";//敵フラグナンバー４
//-----------------------------------<操作関係の関数>---------------------------------
target.addEventListener("click", mouseClick);

function mouseClick(e){
  var offsetX = e.offsetX;
  var offsetY = e.offsetY;
  console.log("X:" + offsetX, "Y:" + offsetY, eventStatus);
  //スタートを押したらゲーム画面に以降
  if(eventStatus == 0){
    if(offsetX > 190 && offsetX < 310 && offsetY > 120 && offsetY < 200){
    eventStatus = 1;
    }
  }
  //
  /*if(eventStatus == 1){
    if(offsetX < 190 || offsetX > 310 || offsetY < 120 || offsetY > 200){
    eventStatus = 0;
    }
}
*/
}

function operation(){

}
//-----------------------------------<計算関係の関数>-----------------------------------
function clac(){

}
//---------------------------------<イベント管理の関数>---------------------------------


function events(){

}

//-------------------------------------<敵の制御>-------------------------------------
function enter_kobae(){
  if(enemy_cnt < 50){
  for(i = 0; i < 20; i++){
      if(enemy[i][7] == 0){
        enemy[i][0] = i;
        enemy[i][1] = i;
        enemy[i][2] = 0;
        enemy[i][3] = 0;
        enemy[i][4] = 0;
        enemy[i][5] = 0;
        enemy[i][6] = 1;
        enemy[i][7] = 1;
        enemy[i][8] = 10;
        enemy[i][9] = 0;
        // 1[enemy_x, 2enemy_y, 3enemy_type, 4muki, 5pattarn, 6hp, 7flag, 8point, 9hit]
      }
      SFlies(i);
    }
  }
}

function enemy_control(){
    enter_kobae();
}

//-------------------------------------<動きの制御>-------------------------------------
//左に進む
function move1(enemy_x,enemy_y){
if(enemy_flag == 1)
  {
  enemy_x++;
  }
}



//-----------------------------------<描画関係の関数>-----------------------------------
function titlelogo(){
  if(eventStatus == 0){
  ctx.font = "16px Arial";
  ctx.fillStyle = "#0095DD";
  ctx.fillText("ハエ叩きゲーム", 190 ,140);
  ctx.fillText("スタート！", 210 ,200);
  }
}
function SFlies(i){
  if(eventStatus == 1){
    //ctx.beginPath();
    ctx.drawImage(enemy_kobae, enemy[i][0], enemy[i][1]);
    //ctx.closePath();
    }
}

function draw(){
  titlelogo();
  SFlies();
}
//------------------------------------<メインループ>------------------------------------
function main(){
  //描画のリセット
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  //各機能の関数
  operation();//操作関係の関数
  clac();//計算関係の関数
  enemy_control();//敵の制御
  events();//イベント管理の関数
  draw();//描画関係の関数
}

//main関数を10ミリ秒毎呼び出す
var interval = setInterval(main, 10);


//-----------------------------------<log>-----------------------------------
target.addEventListener('click', function(e){
  console.log(e);
});


//-----------------------------------<>-----------------------------------



  </script>
      </body>
  </html>
